# nevatrip_test

## Задача 1
Описание
Система позволяет пользователям бронировать и подтверждать заказы на события, генерируя уникальные штрих-коды для каждого заказа. При успешной брони информация о заказе сохраняется в базе данных SQLite.
Структура функций
1. generateBarcode($length = 8)
Генерирует уникальный штрих-код заданной длины (по умолчанию 8 символов). Использует случайный набор цифр от 0 до 9.
2. addOrder($event_id, $event_date, $ticket_adult_price, $ticket_adult_quantity, $ticket_kid_price, $ticket_kid_quantity, $user_id)
Добавляет новый заказ в базу данных.
•	Параметры:
o	$event_id: ID события.
o	$event_date: Дата и время события.
o	$ticket_adult_price: Цена взрослого билета.
o	$ticket_adult_quantity: Количество взрослых билетов.
o	$ticket_kid_price: Цена детского билета.
o	$ticket_kid_quantity: Количество детских билетов.
o	$user_id: ID пользователя.
•	Процесс:
1.	Устанавливает соединение с базой данных SQLite.
2.	Вычисляет общую стоимость заказа.
3.	Генерирует уникальный штрих-код.
4.	Отправляет запрос на бронирование через makeBookingRequest.
5.	При успешном бронировании отправляет запрос на подтверждение через makeApprovalRequest.
6.	Если подтверждение прошло успешно, сохраняет заказ в базе данных.
3. makeBookingRequest(...)
Отправляет POST-запрос на бронирование заказа.
•	Параметры: Информация о заказе (идентификаторы, цены, количество и штрих-код).
•	Возвращает: Ответ от сервера с информацией о статусе бронирования.
4. makeApprovalRequest($barcode)
Отправляет POST-запрос для подтверждения заказа по штрих-коду.
•	Параметры: Штрих-код.
•	Возвращает: Ответ от сервера с информацией о статусе подтверждения.
5. sendPostRequest($url, $data)
Отправляет POST-запрос на указанный URL с данными.
•	Параметры:
o	$url: URL-адрес для отправки запроса.
o	$data: Данные для отправки.
•	Возвращает: Ответ в виде ассоциативного массива.




## Задача 2
Для нормализации таблицы можно создать три таблицы:
1.	Таблица событий (events):
o	id (PK)
o	name
o	description
o	date
2.	Таблица типов билетов (ticket_types):
o	id (PK)
o	name
o	price
3.	Таблица заказов (orders):
o	id (PK)
o	event_id (FK)
o	user_id
o	created
4.	Таблица билетов (tickets):
o	id (PK)
o	order_id (FK)
o	ticket_type_id (FK)
o	barcode
o	quantity
Объяснение решения
•	Таблица событий содержит информацию о самих событиях, что позволяет избежать дублирования данных.
•	Таблица типов билетов позволяет добавлять новые типы билетов без изменения структуры других таблиц. Например, мы можем добавить льготные и групповые билеты с их уникальными ценами.
•	Таблица заказов будет содержать информацию о самих заказах, а не о конкретных билетах.
•	Таблица билетов позволяет отслеживать каждый купленный билет с уникальным штрих-кодом, а также их количество.

